<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<h:head>
	<title>Lançamentos</title>
	<link rel="stylesheet" type="text/css"
		href="#{facesContext.externalContext.requestContextPath}/css/style-new-user.css"
		media="screen" />
</h:head>
<h:body>
	<b:container fluid="true">
		<b:row>
			<b:column span="12">
				<ui:include src="/nav.xhtml"/>
			</b:column>			
		</b:row>
		
		<b:row>
			<b:form id="formEntries">
			<b:column span="12">
				<h:messages />
			</b:column>
			

			<h:panelGrid columns="2">
				<f:facet name="header">
				Lançamentos
			</f:facet>

				<h:outputLabel value="ID:" />
				<b:inputText value="#{entryBean.entry.id}" readonly="true" />

				<h:outputLabel value="Nota fiscal:" />
				<b:inputText value="#{entryBean.entry.invoice}" required="true"
					validatorMessage="O número da nota fiscal precisa ter pelo menos 10 caracteres"
					requiredMessage="É necessário informar o número da nota fiscal">
					<f:validateLength minimum="10" />
				</b:inputText>


				<h:outputLabel value="Origem:" />
				<b:inputText value="#{entryBean.entry.origin}" required="true"
					requiredMessage="É necessário informar o nome da empresa de origem"
					validatorMessage="O nome da empresa de origem precisa ter no mínimo 5 caracteres">
					<f:validateLength minimum="5" />
				</b:inputText>

				<h:outputLabel value="Destino:" />
				<b:inputText value="#{entryBean.entry.destination}" required="true"
					requiredMessage="É necessário informar o nome da empresa de destino"
					validatorMessage="O nome da empresa de destino precisa ter no mínimo 5 caracteres">
					<f:validateLength minimum="5" />
				</b:inputText>

				<h:outputLabel />

				<h:panelGroup>
					<b:commandButton value="Novo" action="#{entryBean.clear}"
						look="primary" image="/resources/img/new.png" immediate="true" />
					<b:commandButton value="Remover" action="#{entryBean.removeById}"
						look="danger" immediate="true" />
					<b:commandButton value="Salvar" action="#{entryBean.save}"
						look="success" />
				</h:panelGroup>
			</h:panelGrid>

			<h:dataTable value="#{entryBean.entries}" var="e" border="2">
				<f:facet name="header">
				Lançamentos
			</f:facet>

				<h:column>
					<f:facet name="header">ID</f:facet>
					<h:outputLabel value="#{e.id}" />
				</h:column>

				<h:column>
					<f:facet name="header">Nota fiscal</f:facet>
					<h:outputLabel value="#{e.invoice}" />
				</h:column>

				<h:column>
					<f:facet name="header">Origem</f:facet>
					<h:outputLabel value="#{e.origin}" />
				</h:column>

				<h:column>
					<f:facet name="header">Destino</f:facet>
					<h:outputLabel value="#{e.destination}" />
				</h:column>

				<h:column>
					<f:facet name="header">
					Ação
				</f:facet>
					<h:commandLink value="Editar">
						<!-- value = objeto correspondente à linha, injetando os dados no target (person bean)  -->
						<f:setPropertyActionListener value="#{e}"
							target="#{entryBean.entry}" />
					</h:commandLink>
					<h:commandLink value="Remover" action="#{entryBean.removeById}"
						immediate="true">
						<!-- value = objeto correspondente à linha, injetando os dados no target (person bean)  -->
						<f:setPropertyActionListener value="#{e}"
							target="#{entryBean.entry}" />
					</h:commandLink>
				</h:column>

			</h:dataTable>
		</b:form>
		</b:row>
	</b:container>
</h:body>
</html>